import net from 'net';

export function writeToSocket(socket: net.Socket, data) {
  if (!data || ['closed', 'readOnly'].includes(socket.readyState)) return;
  const isWriteSuccessful = socket.write(data);
  if (!isWriteSuccessful) {
    socket.pause();
    socket.removeAllListeners('drain');
    socket.once('drain', () => {
      socket.resume()
    });
  }
}
